<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1. Cloudflare Pages &mdash; cf-connect-2022  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="2. Cloudflare Images (WIP)" href="lab2.html" />
    <link rel="prev" title="4. Setup Node Package Manager" href="npm.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> cf-connect-2022
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Pre-Requisites:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="github.html">1. Setup Github</a></li>
<li class="toctree-l1"><a class="reference internal" href="git.html">2. Setup Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">3. Setup Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="npm.html">4. Setup Node Package Manager</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Lab Exercises:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">1. Cloudflare Pages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#clone-github-repository">1.1. Clone GitHub Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deploy-pages-project-from-github-repository">1.2. Deploy Pages Project from GitHub Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-functions-with-cloudflare-pages">1.3. Using Functions with Cloudflare Pages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="lab2.html">2. Cloudflare Images (WIP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab3.html">3. Cloudflare Workers (WIP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab4.html">4. Cloudflare Zero Trust Gateway</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">cf-connect-2022</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">1. </span>Cloudflare Pages</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/lab1.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="cloudflare-pages">
<h1><span class="section-number">1. </span>Cloudflare Pages<a class="headerlink" href="#cloudflare-pages" title="Permalink to this headline"></a></h1>
<p>Welcome to Lab 1 at Cloudflare Connect 2022 - This lab will focus on setting up a simple image gallery deployed on Cloudflared Edge using Cloudflare Pages.
By the end of this lab you will have:</p>
<ul class="simple">
<li><p>How to set up your first Pages project</p></li>
<li><p>The developer experience when using Pages</p></li>
<li><p>How to add dynamic functionality with with help from Cloudflare Workers/Functions</p></li>
</ul>
<p>Build fast sites.In record time. Cloudflare Pages is a JAMstack platform for frontend developers to collaborate and deploy websites.</p>
<div class="note admonition">
<p class="admonition-title">Learn More about Cloudflare Pages! </p>
<p>Check out the <a class="reference external" href="https://pages.cloudflare.com/">Cloudflare Homepage</a> to learn more</p>
</div>
<section id="clone-github-repository">
<h2><span class="section-number">1.1. </span>Clone GitHub Repository<a class="headerlink" href="#clone-github-repository" title="Permalink to this headline"></a></h2>
<p>To make things easier we have setup a starter gallery app on GitHub. Lets fork and clone the repository.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>gh repo fork cf-tme/connect_2022_lab1
</pre></div>
</div>
<p>This should create a fork of the starter repository in your gh account. Follow the fork with a clone</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>gh repo clone &lt;yourgithubusername&gt;/connect_2022_lab1
</pre></div>
</div>
<p>Now all the files should be local in your working directory, let navigate into the repo and start coding!</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> &lt;yourgithubusername&gt;/connect_2022_lab1
</pre></div>
</div>
</section>
<section id="deploy-pages-project-from-github-repository">
<h2><span class="section-number">1.2. </span>Deploy Pages Project from GitHub Repository<a class="headerlink" href="#deploy-pages-project-from-github-repository" title="Permalink to this headline"></a></h2>
<p>Deploying our GitHub project to pages is as simple as connecting our GitHub account to Cloudflare.</p>
<p>Login to the <a class="reference external" href="https://dash.cloudflare.com">Cloudflare Dashboard</a></p>
<p>Select <strong>Pages</strong> on the left hand side and press <strong>Create a Project</strong> and select <strong>Connect GitHub</strong></p>
<p><img alt="pages" src="_images/pages_gh_setup.png" /></p>
<div class="note admonition">
<p class="admonition-title">Authenticate to GitHub</p>
<p>If you are not already logged into GitHub in your browser you may be asked to re-authenticate</p>
</div>
<p>You will be prompted to <strong>Install and Authorize</strong> Cloudflare Pages to your github account, press the button to proceed.</p>
<p><img alt="linkgh" src="_images/pages_gh_auth.png" /></p>
<p>Once connected you will be brought back to the Cloudflare Pages dashboard. Select <em>connect_2022_lab1</em> on the following page</p>
<p><img alt="linkgh" src="_images/pages_gh_repo_select.png" /></p>
<p>Once selected you will need to configure build parameters. This is build using React so we will set the following build parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Project</span> <span class="n">name</span> <span class="o">-</span> <span class="n">connect</span><span class="o">-</span><span class="mi">2022</span><span class="o">-</span><span class="n">lab1</span>
<span class="n">Production</span> <span class="n">branch</span> <span class="o">-</span> <span class="n">master</span>
<span class="n">Framework</span> <span class="n">preset</span> <span class="o">-</span> <span class="n">Create</span> <span class="n">React</span> <span class="n">App</span>
<span class="n">Build</span> <span class="n">command</span> <span class="o">-</span> <span class="n">npm</span> <span class="n">run</span> <span class="n">build</span>
<span class="n">Build</span> <span class="n">output</span> <span class="n">directory</span> <span class="o">-</span> <span class="o">/</span><span class="n">build</span>
</pre></div>
</div>
<p><img alt="linkgh" src="_images/pages_gh_add.png" /></p>
<p>Press <strong>Deploy</strong></p>
<div class="note admonition">
<p class="admonition-title">Deployment Progress</p>
<p>Once started the deployment will take a few moments to complete - you can follow the deployment details to monitor progress of the deployment.</p>
</div>
<p>Once the deployment has completed you will be presented with a success message as well as a URL to visit your new project Select the <strong>link</strong>.</p>
<div class="note admonition">
<p class="admonition-title">pages.dev Domain</p>
<p>By default new projects will automatically be given a *.pages.dev domain, If you would like to setup custom routes to your own domain you can do that through DNS CNAMEing (or directly in the project settings if your domain nameservers are Cloudflare)</p>
</div>
<p>When navigating to the link you should see a blurry image gallery.</p>
<p><img alt="linkgh" src="_images/blurry-img-gallery.png" /></p>
<p>Terrific! Congratulations you have successfully deployed a custom application using Cloudflare Pages.</p>
</section>
<section id="using-functions-with-cloudflare-pages">
<h2><span class="section-number">1.3. </span>Using Functions with Cloudflare Pages<a class="headerlink" href="#using-functions-with-cloudflare-pages" title="Permalink to this headline"></a></h2>
<p>Functions enable you to run server-side code to enable dynamic functionality without running a dedicated server. With Functions, you can introduce application aspects such as authenticating, querying databases, handling form submissions, or working with middleware.</p>
<div class="note admonition">
<p class="admonition-title">Learn More about Functions! </p>
<p>Check out the <a class="reference external" href="https://developers.cloudflare.com/pages/platform/functions/">Cloudflare Docs</a> to learn more</p>
</div>
<p>For our simple gallery application we are going to create a new function that will simply return the time when navigating to the <em>time</em> page for our application.</p>
<p>Returning to our command line lets change to the <em>functions</em> directory</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> functions
</pre></div>
</div>
<p>Whatever name we give this file is going to be the path in our url. Lets create a new file called <em>time.js</em></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>touch time.js
</pre></div>
</div>
<p>Now open that file in your favorite text editor.</p>
<div class="note admonition">
<p class="admonition-title">Text Editor</p>
<p>VS Code is a versatile text editor that can be launched directly from the terminal using <em>code <filename></em> to install VS Code follow the steps found in the <a class="reference external" href="https://code.visualstudio.com/download">Documentation</a></p>
</div>
<p>In the file enter the following code:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">onRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Response</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">())</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Some <strong>text</strong>!</p>
<div class="warning admonition">
<p class="admonition-title">Here’s my title</p>
<p>Here’s my admonition content</p>
</div>
<p>now lets write a function that lets us execute some code -
new file for time - and then git add . git commit -m “new file” git push</p>
<p>then add a new function file to learn how functions work - return</p>
<p>boom now if we look at pages we see that there is an ongoing deployment! awesome it autodeploys it with the git push</p>
<p>if we got to /time you can see it returns the time - pretty cool!</p>
<p>now functions are really powerfull for creating integrations and api endpoints - in the interest of time we have built most of these for you.</p>
<p>when using the API endpoints there is often a need to repeatedly refernce stored variable data - this is where we can use KV to persist variables. IN this example we will be using it to store details about the images in our gallery!</p>
<p>create a new KV namespace called “IMAGES”</p>
<p>note down the ID as we will need it in later labs!</p>
<p>once the space is created go to settings and go to function - edit binding with variable name IMAGES and kv namespace set to the Images namespace we created</p>
<p>now we will need to rebuild the project so lets do that!</p>
<p>once done</p>
<p>there are a few api endpoints we can test if you go to /api/image - lets see the result</p>
<p>hmm we it looks empty, but thats good, we havent uploaded any images yet.</p>
<p>now you might be wondering … ok well then why were there images on the homepage!</p>
<p>good eye - this is because we have actually hardcoded the image data for the homepage - so lets go and clear it out and change it to read image data from our KV store</p>
<ul class="simple">
<li><p>delete the const data and uncomment the useSWR to get the data out of the kv store! this will make a call to the api/images endpoint and pull the data and present it.</p></li>
</ul>
<p>now if we return to our homepage - look at that an empty gallery!  - unfortunatley that is all the time we have for lab 1 but if you join us for lab 2 we will upload some cute images hosted in cloudflare and serve them up with our application</p>
<p>at this stage you should ahve an empty pages on the home screen :) now lets add some pictures</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="npm.html" class="btn btn-neutral float-left" title="4. Setup Node Package Manager" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="lab2.html" class="btn btn-neutral float-right" title="2. Cloudflare Images (WIP)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Cloudflare.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>