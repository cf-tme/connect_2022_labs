<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lab 2 - Cloudflare Images &mdash; cf-connect-2022  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Lab 3 - Cloudflare Workers" href="lab3.html" />
    <link rel="prev" title="Lab 1 - Cloudflare Pages" href="lab1.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> cf-connect-2022
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Pre-Requisites:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="github.html">Setup Github</a></li>
<li class="toctree-l1"><a class="reference internal" href="git.html">Setup Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">Setup Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="npm.html">Setup Node Package Manager</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Lab Exercises:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="lab1.html">Lab 1 - Cloudflare Pages</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Lab 2 - Cloudflare Images</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#guided-hands-on-experience">Guided Hands-On Experience</a></li>
<li class="toctree-l2"><a class="reference internal" href="#clone-repository">Clone Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prepare-repo-for-script-execution">Prepare Repo for script execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#upload-images">Upload Images</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#upload-via-script">Upload via Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#upload-via-curl">Upload via cURL</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="lab3.html">Lab 3 - Cloudflare Workers</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab4.html">Lab 4 - Cloudflare Zero Trust Gateway</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">cf-connect-2022</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Lab 2 - Cloudflare Images</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/lab2.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="lab-2-cloudflare-images">
<h1>Lab 2 - Cloudflare Images<a class="headerlink" href="#lab-2-cloudflare-images" title="Permalink to this headline"></a></h1>
<p>Welcome to Lab 2 at Cloudflare Connect 2022 - This lab will focus on Uploading and Delivering Images via Cloudflare Images
By the end of this lab you will have:</p>
<ul class="simple">
<li><p>Uploaded images to Cloudflare via the API</p></li>
<li><p>Used Image variants</p></li>
<li><p>Seamlessly integrated Cloudflare Images and Pages</p></li>
</ul>
<p>Cloudflare Images provides a straightforward, end-to-end solution to cost-effectively build and maintain your image infrastructure. Store, resize, and optimize images at scale using one unified product.</p>
<div class="note admonition">
<p class="admonition-title">Learn More about Cloudflare Images! </p>
<p>Check out the <a class="reference external" href="https://www.cloudflare.com/products/cloudflare-images/">Cloudflare Homepage</a> to learn more</p>
</div>
<section id="guided-hands-on-experience">
<h2>Guided Hands-On Experience<a class="headerlink" href="#guided-hands-on-experience" title="Permalink to this headline"></a></h2>
<p>Cloudflare Images is a subscriptions based product, and to ensure you can experience all that Cloudflare Images has to offer this lab will be a guided experience.</p>
<p>The steps bellow can be executed when the instructor directs you to them.</p>
<div class="note admonition">
<p class="admonition-title">Running Scripts </p>
<p>During this lab you will be running scripts from within the repo in the “scripts” folder, these scripts will be using node, if you have not setup node please follow the steps <a class="reference internal" href="npm.html"><span class="doc std std-doc">here</span></a> to learn more</p>
</div>
</section>
<section id="clone-repository">
<h2>Clone Repository<a class="headerlink" href="#clone-repository" title="Permalink to this headline"></a></h2>
<p>To make things easier we have setup a starter gallery app on GitHub. Lets fork and clone the repository.
Move back up to your home directory</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="nv">$HOME</span>
</pre></div>
</div>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>gh repo fork netgusto/imagejam.net
</pre></div>
</div>
<p>This should create a fork of the starter repository in your gh account and prompt you to clone - enter <em>Yes</em></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>✓ Created fork &lt;github-username&gt;/imagejam.net
? Would you like to clone the fork? Yes
</pre></div>
</div>
<p>Now all the files should be local in your working directory, let navigate into the repo to start coding!</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> imagejam.net
</pre></div>
</div>
</section>
<section id="prepare-repo-for-script-execution">
<h2>Prepare Repo for script execution<a class="headerlink" href="#prepare-repo-for-script-execution" title="Permalink to this headline"></a></h2>
<p>To run the scripts during the Hands On section you will need to first setup the environment, run:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>npm install
</pre></div>
</div>
<div class="warning admonition">
<p class="admonition-title">Initialization</p>
<p>Before running the command ensure that you are in the root directory of the repository - otherwise this will fail</p>
</div>
</section>
<section id="upload-images">
<h2>Upload Images<a class="headerlink" href="#upload-images" title="Permalink to this headline"></a></h2>
<p>To upload images we will first need to define our api key as a system environment variable.</p>
<div class="warning admonition">
<p class="admonition-title">API Key</p>
<p>The API Key will be provided to you during the session by the instructor</p>
</div>
<p><strong>MacOS / Linux</strong></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">CF_IMAGES_EVENT_KEY</span><span class="o">=</span> ...
</pre></div>
</div>
<p><strong>Windows</strong></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nv">$Env</span>:CF_IMAGES_EVENT_KEY <span class="o">=</span> ...
</pre></div>
</div>
<p>Once the environment variable is set you can run the upload script - you can do this with either the built in script or using <code class="docutils literal notranslate"><span class="pre">curl</span></code></p>
<section id="upload-via-script">
<h3>Upload via Script<a class="headerlink" href="#upload-via-script" title="Permalink to this headline"></a></h3>
<p><strong>Local Image File</strong>
If you have an Image file locally you would like to upload you can use the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>node scripts/handson/upload.js --file path/to/local/file.png <span class="o">[</span>--id some-custom-image-id.png<span class="o">]</span> <span class="o">[</span>--metadata <span class="s1">&#39;{&quot;tag&quot;: &quot;connect&quot;}&#39;</span><span class="o">]</span>
</pre></div>
</div>
<p><strong>Image URL</strong>
If you know an image URL that you would like to upload you can use the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>node scripts/handson/upload.js --url https://example.com/image.png <span class="o">[</span>--id some-custom-image-id.png<span class="o">]</span> <span class="o">[</span>--metadata <span class="s1">&#39;{&quot;tag&quot;: &quot;connect&quot;}&#39;</span><span class="o">]</span>
</pre></div>
</div>
</section>
<section id="upload-via-curl">
<h3>Upload via cURL<a class="headerlink" href="#upload-via-curl" title="Permalink to this headline"></a></h3>
<p><strong>Local Image File</strong>
If you have an Image file locally you would like to upload you can use the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>curl -X POST https://imagejam.net/connect-upload/ <span class="se">\</span>
    -H <span class="s2">&quot;Authorization: Bearer </span><span class="nv">$CF_IMAGES_EVENT_KEY</span><span class="s2">&quot;</span> <span class="se">\</span>
    --form <span class="s1">&#39;file=@/path/to/local/file.png&#39;</span> <span class="se">\</span>
    --form <span class="s1">&#39;id=some-custom-image-id.png&#39;</span> <span class="se">\</span>
    --form <span class="s1">&#39;metadata={&quot;tag&quot;:&quot;connect&quot;}&#39;</span>
</pre></div>
</div>
<p><strong>Image URL</strong>
If you know an image URL that you would like to upload you can use the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>curl -X POST https://imagejam.net/connect-upload/ <span class="se">\</span>
    -H <span class="s2">&quot;Authorization: Bearer </span><span class="nv">$CF_IMAGES_EVENT_KEY</span><span class="s2">&quot;</span> <span class="se">\</span>
    --form <span class="s1">&#39;url=https://example.com/image.png&#39;</span> <span class="se">\</span>
    --form <span class="s1">&#39;id=some-custom-image-id.png&#39;</span> <span class="se">\</span>
    --form <span class="s1">&#39;metadata={&quot;tag&quot;:&quot;connect&quot;}&#39;</span>
</pre></div>
</div>
<div class="note admonition">
<p class="admonition-title">LAB 2 COMPLETE! </p>
<p>You have successfully Completed Lab 2! Congratulations on uploading and optimizing your Web Application with Cloudflare Images.</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="lab1.html" class="btn btn-neutral float-left" title="Lab 1 - Cloudflare Pages" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="lab3.html" class="btn btn-neutral float-right" title="Lab 3 - Cloudflare Workers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Cloudflare.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>